var currentDonationTotal=0;window.onload=function(){httpGet("https://zeldathon.net/api/Kinstone/total",setTotal);httpGet("https://zeldathon.net/api/teamhousecup",setPoints);chrome.storage.sync.get(['total'],function(result){if(isNaN(result.total)||result.total==null){chrome.storage.sync.set({total:0},function(){})}
document.getElementById('totaldonated').innerHTML="$"+result.total});chrome.storage.sync.get(['budget'],function(result){if(isNaN(result.budget)||result.budget==null){chrome.storage.sync.set({budget:-1},function(){})}
if(result.budget==-1){document.getElementById('budget').innerHTML="none"}else{document.getElementById('budget').innerHTML="$"+result.budget}});function setPoints(data){var points=JSON.parse(data);document.getElementById('courage').innerHTML=points[0].points;document.getElementById('power').innerHTML=points[1].points;document.getElementById('wisdom').innerHTML=points[2].points}
function setTotal(data){var marathontotal=JSON.parse(data);document.getElementById('marathontotal').innerHTML=marathontotal[0]}}
document.getElementById('options').onclick=function(){chrome.tabs.create({'url':"html/options.html"})}
function httpGet(theUrl,callback){var xhr=new XMLHttpRequest();xhr.open("GET",theUrl,!0);xhr.onload=function(e){if(xhr.readyState===4){if(xhr.status===200){callback(xhr.responseText)}else{console.error(xhr.statusText);return 0}}};xhr.onerror=function(e){console.error(xhr.statusText)};xhr.send(null)}